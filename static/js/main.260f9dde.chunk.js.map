{"version":3,"sources":["js/store/router/reducers.js","js/store/vk/reducers.js","js/store/formData/reducers.js","js/store/reducers.js","js/store/vk/actionTypes.js","js/store/router/actionTypes.js","js/services/VK.js","js/services/_functions.js","js/store/formData/actionTypes.js","js/services/routes.js","js/store/router/actions.js","js/services/config.js","js/services/restApi.js","js/components/atoms/OutlineMessage/index.js","js/components/atoms/BackButton/index.js","js/panels/clear/connectedPanel.js","js/components/modals/HomeBotsListModal.js","js/components/modals/HomeBotInfoModal.js","js/components/atoms/RouteLink/index.js","App.js","js/store/vk/actions.js","index.js","js/services/constants.js"],"names":["initialState","activeStory","activeView","activePanel","activeHash","storiesHistory","viewsHistory","panelsHistory","activeModals","modalHistory","popouts","scrollPosition","activeModalProps","headerContexts","routeParams","hashParams","storiesHashes","accessToken","undefined","colorScheme","activeTab","componentScroll","forms","combineReducers","vkui","state","arguments","length","action","type","Object","objectSpread","payload","defineProperty","component","tab","x","y","element","document","getElementById","getElementsByClassName","scrollLeft","scrollTop","router","View","view","Panel","panel","window","history","pushState","hashes","viewIndexInHistory","indexOf","splice","concat","toConsumableArray","VKConnect","send","pageYOffset","Set","id","Array","from","haveIndex","story","initial_panel","hashesHistory","paramsHashes","settingView","firstPanel","shift","firstView","pop","hash","scrollTo","smoothScrollToTop","c","documentElement","body","requestAnimationFrame","push","currentStoriesHashes","setView","setPanel","setStory","popoutsData","viewModalsHistory","activeModal","panelsHistoryNew","status","popout","modalProps","modalsHistory","formData","form","data","routes","^hash_link","routesRegExps","route","regExp","RegExp","flags","setPage","goBack","closeModal","config","RestClient","classCallCheck","this","handler","a","_token","obj","prefix","p","str","hasOwnProperty","k","v","serialize","encodeURIComponent","join","method","query","uniq","isFile","token","u","Date","getTime","headers","props","Accept","Content-Type","JSON","stringify","mode","Vk-Params","location","search","substring","url","Promise","resolve","reject","response","fetch","then","_ref","asyncToGenerator","regenerator_default","mark","_callee2","res","wrap","_context2","prev","next","text","sent","parse","error","_this","abrupt","stop","_x4","apply","catch","r","err","String","isServerError","success","_this2","xhr","$","ajaxSettings","xhrLoads","ajax","_ref2","_callee5","_ref3","_ref4","_context5","_this3","prepareData","slicedToArray","makeQuery","_x7","_x8","_ref5","_callee7","_ref6","_ref7","_context7","_this4","_x10","_x11","file","field","paramsAjax","FormData","append","_ref8","_callee9","_ref9","_ref10","_context9","_this5","contentType","processData","cache","makeQueryAjax","_x14","_x15","OutlineMessage","react_default","createElement","className","React","PureComponent","BackButton","es6","onClick","icon","cancel_default","back_default","mapDispatchToProps","connect","HomePanelBase","left","showBackButton","atoms_BackButton","atoms_OutlineMessage_OutlineMessage","Component","bots","name","avatar","desc","HomeBotsListModal","_this$props","onClose","openModal","header","IS_PLATFORM_IOS","right","dismiss_default","settlingHeight","map","bot","index","key","description","before","size","src","asideContent","chevron_default","fill","title","RouteLink","gotToPage","e","findedLink","target","parentNode","currentTarget","href","match","preventDefault","setRouteHash","params","cloneElement","children","dispatch","matched","matchedParams","console","log","App","possibleConstructorReturn","getPrototypeOf","call","restApiErrorHandler","alert","message","lastAndroidBackAction","rest","withErrorHandler","confirm","prompt","openPopout","actions","autoclose","closePopout","toString","isArray","callback","Function","defaultValue","titleAccept","value","style","marginTop","onChange","VKConnectOld","subscribe","VKConnectOldCallback","detail","unsubscribe","scheme","onpopstate","timeNow","closeHeaderContext","prevProps","prevState","snapshot","_this$props2","pageScrollPosition","scroll","_this$props3","homeModals","modals_HomeBotsListModal","HomeBotInfoModal","isWebView","tabbar","selected","newsfeed_default","more_default","modal","onSwipeBack","connectedPanel","atoms_RouteLink","bindActionCreators","__webpack_require__","d","__webpack_exports__","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","onerror","errorMsg","lineNumber","columnNumber","textAoutput","replace","stack","navigator","userAgent","innerHTML","info","root","mVKMiniAppsScrollHelper","ReactDOM","render","react_redux_es","src_App"],"mappings":"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","file":"static/js/main.260f9dde.chunk.js","sourcesContent":["import {\n    SET_PAGE,\n    GO_BACK,\n    OPEN_POPOUT,\n    CLOSE_POPOUT,\n    OPEN_MODAL,\n    CLOSE_MODAL,\n    SET_STORY,\n    OPEN_HEADER_CONTEXT,\n    CLOSE_HEADER_CONTEXT\n} from './actionTypes';\n\nimport * as VK from \"../../services/VK\";\nimport {smoothScrollToTop} from \"../../services/_functions\";\n\n\nconst initialState = {\n    activeStory: null,\n    activeView: null,\n    activePanel: null,\n    activeHash: null,\n\n    storiesHistory: [],\n    viewsHistory: [],\n    panelsHistory: [],\n\n    activeModals: [],\n    modalHistory: [],\n    popouts: [],\n\n    scrollPosition: [],\n    activeModalProps: {},\n    headerContexts: [],\n    routeParams: {},\n    hashParams: {},\n    storiesHashes: {}\n};\n\nexport const routerReducer = (state = initialState, action) => {\n\n    switch (action.type) {\n\n        case SET_PAGE: {\n            let View = action.payload.view;\n            let Panel = action.payload.panel;\n\n            window.history.pushState(null, null);\n\n            let panelsHistory = state.panelsHistory[View] || [];\n            let viewsHistory = state.viewsHistory[state.activeStory] || [];\n            let {storiesHashes} = state;\n\n            if (!storiesHashes[state.activeStory]) {\n                storiesHashes[state.activeStory] = {\n                    hashes: [], // История хешей в окнтексте одной story\n                    hashParams: [] // История параметров хешей в контексте этой story\n                } \n            }\n\n            const viewIndexInHistory = viewsHistory.indexOf(View);\n\n            if (viewIndexInHistory !== -1) {\n                viewsHistory.splice(viewIndexInHistory, 1);\n            }\n\n            if (panelsHistory.indexOf(Panel) === -1) {\n                panelsHistory = [...panelsHistory, Panel];\n            }\n\n            if (panelsHistory.length > 1) {\n                VK.swipeBackOn();\n            }\n\n\n            return {\n                ...state,\n                activeView: View,\n                activePanel: Panel,\n\n                panelsHistory: {\n                    ...state.panelsHistory,\n                    [View]: panelsHistory,\n                },\n                viewsHistory: {\n                    ...state.viewsHistory,\n                    [state.activeStory]: [...viewsHistory, View]\n                },\n                scrollPosition: {\n                    ...state.scrollPosition,\n                    [state.activeStory + \"_\" + state.activeView + \"_\" + state.activePanel]: window.pageYOffset\n                },\n                storiesHashes\n            };\n        }\n\n        case OPEN_HEADER_CONTEXT: {\n            window.history.pushState(null, null);\n            let headerContexts = new Set([...state.headerContexts, action.payload.id]);\n            headerContexts = Array.from(headerContexts);\n            return {\n                ...state,\n                headerContexts: headerContexts\n            }\n        }\n\n        case CLOSE_HEADER_CONTEXT: {\n            let headerContexts = [...state.headerContexts];\n            let haveIndex = headerContexts.indexOf(action.payload.id);\n            \n            if (haveIndex >= 0) {\n                headerContexts.splice(haveIndex, 1);\n            }\n\n            return {\n                ...state,\n                headerContexts: headerContexts\n            }\n        }\n\n        case SET_STORY: {\n            window.history.pushState(null, null);\n\n            let viewsHistory = state.viewsHistory[action.payload.story] || [action.payload.story];\n\n            let storiesHistory = state.storiesHistory;\n            let activeView = viewsHistory[viewsHistory.length - 1];\n            let panelsHistory = state.panelsHistory[activeView] || [action.payload.initial_panel];\n            let activePanel = panelsHistory[panelsHistory.length - 1];\n            let headerContexts = [...state.headerContexts];\n\n            let hashParams = {...state.hashParams};\n            let { storiesHashes } = state;\n\n            if (!storiesHashes[action.payload.story]) {\n                storiesHashes[action.payload.story] = {\n                    hashes: [], // История хешей в окнтексте одной story\n                    hashParams: [] // История параметров хешей в контексте этой story\n                } \n            }\n\n\n            let hashesHistory = storiesHashes[action.payload.story].hashes;\n            let hashesParamsHistory = storiesHashes[action.payload.story].paramsHashes;\n\n\n            if (action.payload.story === state.activeStory && !action.payload.settingView) {\n                if (panelsHistory.length > 1) {\n                    let firstPanel = panelsHistory.shift();\n                    panelsHistory = [firstPanel];\n\n                    activePanel = panelsHistory[panelsHistory.length - 1];\n                } else if (viewsHistory.length > 1) {\n                    let firstView = viewsHistory.shift();\n                    viewsHistory = [firstView];\n\n                    activeView = viewsHistory[viewsHistory.length - 1];\n                    panelsHistory = state.panelsHistory[activeView];\n                    activePanel = panelsHistory[panelsHistory.length - 1];\n                }\n\n                if (headerContexts.length > 0) {\n                    headerContexts.pop();\n                }\n\n                if (storiesHashes[action.payload.story].hashes.length && (!action.payload.hash || (action.payload.hash && action.payload.hash === hashesHistory[hashesHistory.length - 1]))) {\n                    storiesHashes[action.payload.story].hashes.pop();\n                }\n\n                if (storiesHashes[action.payload.story].hashParams.length && (!action.payload.hash || (action.payload.hash && action.payload.hash === hashesHistory[hashesHistory.length - 1]))) {\n                    storiesHashes[action.payload.story].hashParams.pop();\n                }\n            }\n\n            if (action.payload.story === state.activeStory \n                && panelsHistory.length === 1 && window.pageYOffset > 0\n                && !action.payload.hash) {\n                window.scrollTo(0, 30);\n\n                smoothScrollToTop();\n            }\n\n            const storiesIndexInHistory = storiesHistory.indexOf(action.payload.story);\n\n            if (storiesIndexInHistory === -1 || (storiesHistory[0] === action.payload.story && storiesHistory[storiesHistory.length - 1] !== action.payload.story)) {\n                storiesHistory = [...storiesHistory, action.payload.story];\n            }\n\n            if (action.payload.hash) {\n                storiesHashes[action.payload.story].hashes.push(action.payload.hash || '')\n                let hashParams = action.payload.hashParams || {};\n                storiesHashes[action.payload.story].hashParams.push(hashParams)\n            }\n\n            let currentStoriesHashes = storiesHashes[action.payload.story];\n\n            return {\n                ...state,\n                activeStory: action.payload.story,\n                activeView: activeView,\n                activePanel: activePanel,\n\n                storiesHistory: storiesHistory,\n                viewsHistory: {\n                    ...state.viewsHistory,\n                    [activeView]: viewsHistory\n                },\n                panelsHistory: {\n                    ...state.panelsHistory,\n                    [activeView]: panelsHistory\n                },\n\n                scrollPosition: {\n                    ...state.scrollPosition,\n                    [state.activeStory + \"_\" + state.activeView + \"_\" + state.activePanel]: window.pageYOffset\n                },\n                headerContexts: headerContexts,\n                activeHash: currentStoriesHashes.hashes[currentStoriesHashes.hashes.length - 1],\n                storiesHashes: storiesHashes,\n                hashParams: currentStoriesHashes.hashParams[currentStoriesHashes.hashParams.length - 1]\n            };\n        }\n\n        case GO_BACK: {\n            let setView = state.activeView;\n            let setPanel = state.activePanel;\n            let setStory = state.activeStory;\n            let hashesHistory;\n            let hashesParamsHistory;\n            let { hashParams } = state;\n            let { storiesHashes } = state;\n            let { activeHash } = state;\n\n            let popoutsData = state.popouts;\n\n            if (popoutsData[setView]) {\n                popoutsData[setView] = null;\n\n                return {\n                    ...state,\n                    popouts: {\n                        ...state.popouts, popoutsData\n                    }\n                };\n            }\n\n            let viewModalsHistory = state.modalHistory[setView];\n\n\n            if (viewModalsHistory !== undefined && viewModalsHistory.length !== 0) {\n                let activeModal = viewModalsHistory[viewModalsHistory.length - 2] || null;\n\n                if (activeModal === null) {\n                    viewModalsHistory = [];\n                } else if (viewModalsHistory.indexOf(activeModal) !== -1) {\n                    viewModalsHistory = viewModalsHistory.splice(0, viewModalsHistory.indexOf(activeModal) + 1);\n                } else {\n                    viewModalsHistory.push(activeModal);\n                }\n\n                return {\n                    ...state,\n                    activeModals: {\n                        ...state.activeModals,\n                        [setView]: activeModal\n                    },\n                    modalHistory: {\n                        ...state.modalHistory,\n                        [setView]: viewModalsHistory\n                    }\n                };\n            }\n\n            let panelsHistory = state.panelsHistory[setView] || [];\n            let viewsHistory = state.viewsHistory[state.activeStory] || [];\n            let storiesHistory = state.storiesHistory;\n\n            if (panelsHistory.length > 1) {\n                panelsHistory.pop();\n\n                setPanel = panelsHistory[panelsHistory.length - 1];\n            } else if (viewsHistory.length > 1) {\n\n                viewsHistory.pop();\n\n                setView = viewsHistory[viewsHistory.length - 1];\n                let panelsHistoryNew = state.panelsHistory[setView];\n\n                setPanel = panelsHistoryNew[panelsHistoryNew.length - 1];\n            } else if (storiesHistory.length > 1 && action.payload.from === 'Android') {\n                storiesHistory.pop();\n\n                setStory = storiesHistory[storiesHistory.length - 1];\n                setView = state.viewsHistory[setStory][state.viewsHistory[setStory].length - 1];\n\n                let panelsHistoryNew = state.panelsHistory[setView];\n\n                if (panelsHistoryNew.length > 1) {\n                    setPanel = panelsHistoryNew[panelsHistoryNew.length - 1];\n                } else {\n                    setPanel = panelsHistoryNew[0];\n                }\n            } else {\n                VK.closeApp();\n            }\n\n            let currentStoriesHashes = storiesHashes[state.activeStory];\n\n            if (currentStoriesHashes) {\n                if (currentStoriesHashes.hashes.length) {\n                    currentStoriesHashes.hashes.pop();\n                }\n                if (currentStoriesHashes.hashParams.length) {\n                    currentStoriesHashes.hashParams.pop()\n                }\n\n                hashParams = currentStoriesHashes.hashParams[currentStoriesHashes.hashParams.length - 1];\n                activeHash = currentStoriesHashes.hashes[currentStoriesHashes.hashes.length - 1];               \n            }\n\n            if (panelsHistory.length === 1 && action.payload.from === 'iOS') {\n                VK.swipeBackOff();\n            }\n            \n            return {\n                ...state,\n                activeView: setView,\n                activePanel: setPanel,\n                activeStory: setStory,\n\n                viewsHistory: {\n                    ...state.viewsHistory,\n                    [state.activeView]: viewsHistory\n                },\n                panelsHistory: {\n                    ...state.panelsHistory,\n                    [state.activeView]: panelsHistory\n                },\n                storiesHashes,\n                hashParams,\n                activeHash\n            };\n        }\n\n        case OPEN_POPOUT: {\n            window.history.pushState(null, null);\n\n            return {\n                ...state,\n                popouts: {\n                    ...state.popouts,\n                    [state.activeView]: action.payload.popout\n                }\n            };\n        }\n\n        case CLOSE_POPOUT: {\n            return {\n                ...state,\n                popouts: {\n                    ...state.popouts,\n                    [state.activeView]: null\n                }\n            };\n        }\n\n        case OPEN_MODAL: {\n            window.history.pushState(null, null);\n\n            let activeModal = action.payload.id || null;\n            let modalProps = action.payload.modalProps || {};\n            let modalsHistory = state.modalHistory[state.activeView] ? [...state.modalHistory[state.activeView]] : [];\n\n            if (activeModal === null) {\n                modalsHistory = [];\n            } else if (modalsHistory.indexOf(activeModal) !== -1) {\n                modalsHistory = modalsHistory.splice(0, modalsHistory.indexOf(activeModal) + 1);\n            } else {\n                modalsHistory.push(activeModal);\n            }\n\n            return {\n                ...state,\n                activeModals: {\n                    ...state.activeModals,\n                    [state.activeView]: activeModal\n                },\n                modalHistory: {\n                    ...state.modalHistory,\n                    [state.activeView]: modalsHistory\n                },\n                activeModalProps: modalProps\n            };\n        }\n\n        case CLOSE_MODAL: {\n            let activeModal = state.modalHistory[state.activeView][state.modalHistory[state.activeView].length - 2] || null;\n            let modalsHistory = state.modalHistory[state.activeView] ? [...state.modalHistory[state.activeView]] : [];\n\n            if (activeModal === null) {\n                modalsHistory = [];\n            } else if (modalsHistory.indexOf(activeModal) !== -1) {\n                modalsHistory = modalsHistory.splice(0, modalsHistory.indexOf(activeModal) + 1);\n            } else {\n                modalsHistory.push(activeModal);\n            }\n\n            return {\n                ...state,\n                activeModals: {\n                    ...state.activeModals,\n                    [state.activeView]: activeModal\n                },\n                modalHistory: {\n                    ...state.modalHistory,\n                    [state.activeView]: modalsHistory\n                }\n            };\n        }\n\n        default: {\n            return state;\n        }\n    }\n};","import {\n    SET_ACCESS_TOKEN,\n    SET_ACTIVE_TAB,\n    SET_COLOR_SCHEME,\n    SET_SCROLL_POSITION,\n    SET_SCROLL_POSITION_BY_ID\n} from './actionTypes';\n\nconst initialState = {\n    accessToken: undefined,\n    colorScheme: 'client_light',\n\n    activeTab: [],\n    componentScroll: []\n};\n\nexport const vkuiReducer = (state = initialState, action) => {\n\n    switch (action.type) {\n\n        case SET_COLOR_SCHEME: {\n            return {\n                ...state,\n                colorScheme: action.payload,\n            };\n        }\n\n        case SET_ACCESS_TOKEN: {\n            return {\n                ...state,\n                accessToken: action.payload,\n            };\n        }\n\n        case SET_ACTIVE_TAB: {\n            return {\n                ...state,\n                activeTab: {\n                    ...state.activeTab,\n                    [action.payload.component]: action.payload.tab\n                },\n            };\n        }\n\n        case SET_SCROLL_POSITION: {\n            return {\n                ...state,\n                componentScroll: {\n                    ...state.componentScroll,\n                    [action.payload.component]: {\n                        x: action.payload.x,\n                        y: action.payload.y\n                    }\n                },\n            };\n        }\n\n        case SET_SCROLL_POSITION_BY_ID: {\n            let element = document.getElementById(action.payload.component).getElementsByClassName(\"HorizontalScroll__in\")[0];\n\n            let x = element.scrollLeft;\n            let y = element.scrollTop;\n\n            return {\n                ...state,\n                componentScroll: {\n                    ...state.componentScroll,\n                    [action.payload.component]: {\n                        x: x,\n                        y: y\n                    }\n                },\n            };\n        }\n\n        default: {\n            return state;\n        }\n    }\n};","import {SET_FORM_DATA} from './actionTypes';\n\nconst initialState = {\n    forms: []\n};\n\nexport const formDataReducer = (state = initialState, action) => {\n\n    switch (action.type) {\n\n        case SET_FORM_DATA: {\n            return {\n                ...state,\n                forms: {\n                    ...state.forms,\n                    [action.payload.form]: action.payload.data\n                }\n            };\n        }\n\n        default: {\n            return state;\n        }\n\n    }\n\n};","import {combineReducers} from \"redux\";\nimport {routerReducer} from './router/reducers';\nimport {vkuiReducer} from './vk/reducers';\nimport {formDataReducer} from \"./formData/reducers\";\n\nexport default combineReducers({\n    vkui: vkuiReducer,\n    router: routerReducer,\n    formData: formDataReducer\n});","export const SET_COLOR_SCHEME = 'SET_COLOR_SCHEME';\nexport const SET_ACCESS_TOKEN = 'SET_ACCESS_TOKEN';\nexport const SET_ACTIVE_TAB = 'SET_ACTIVE_TAB';\nexport const SET_SCROLL_POSITION = 'SET_SCROLL_POSITION';\nexport const SET_SCROLL_POSITION_BY_ID = 'SET_SCROLL_POSITION_BY_ID';","export const SET_PAGE = 'SET_PAGE';\nexport const SET_STORY = 'SET_STORY';\nexport const GO_BACK = 'GO_BACK';\nexport const OPEN_POPOUT = 'OPEN_POPOUT';\nexport const CLOSE_POPOUT = 'CLOSE_POPOUT';\nexport const OPEN_MODAL = 'OPEN_MODAL';\nexport const CLOSE_MODAL = 'CLOSE_MODAL';\nexport const CLOSE_HEADER_CONTEXT = 'CLOSE_HEADER_CONTEXT';\nexport const OPEN_HEADER_CONTEXT = 'OPEN_HEADER_CONTEXT';","import VKConnectOld from \"@vkontakte/vk-connect\";\nimport VKConnect from \"@vkontakte/vkui-connect-promise\";\n\nimport {store} from \"../../index\";\n\nimport {setColorScheme, setAccessToken} from \"../store/vk/actions\";\n\nconst APP_ID = 7170393;\nconst API_VERSION = '5.101';\n\nexport const initApp = () => (dispatch) => {\n    const VKConnectOldCallback = (e) => {\n        if (e.detail.type === 'VKWebAppUpdateConfig') {\n            VKConnectOld.unsubscribe(VKConnectOldCallback);\n\n            dispatch(setColorScheme(e.detail.data.scheme));\n        }\n    };\n\n    VKConnectOld.subscribe(VKConnectOldCallback);\n    VKConnect.send('VKWebAppInit', {});\n};\n\nexport const getAuthToken = (scope) => (dispatch) => {\n    VKConnect.send(\"VKWebAppGetAuthToken\", {\n        \"app_id\": APP_ID,\n        \"scope\": scope.join(',')\n    }).then(data => {\n        dispatch(setAccessToken(data.data.access_token));\n    }).catch(() => {\n        dispatch(setAccessToken(null));\n    });\n};\n\nexport const closeApp = () => {\n    VKConnect.send(\"VKWebAppClose\", {\"status\": \"success\"});\n};\n\nexport const swipeBackOn = () => {\n    VKConnect.send(\"VKWebAppEnableSwipeBack\", {});\n};\n\nexport const swipeBackOff = () => {\n    VKConnect.send(\"VKWebAppDisableSwipeBack\", {});\n};\n\nexport const groupsGet = () => {\n    return APICall('groups.get', {\n        \"extended\": \"1\",\n        \"fields\": \"description\",\n        \"count\": \"100\"\n    });\n};\n\nexport const APICall = (method, params) => {\n    params['access_token'] = store.getState().vkui.accessToken;\n    params['v'] = params['v'] === undefined ? API_VERSION : params['v'];\n\n    return VKConnect.send(\"VKWebAppCallAPIMethod\", {\n        \"method\": method,\n        \"params\": params\n    }).then(data => {\n        return data.data.response;\n    }).catch(error => {\n        return error;\n    });\n};\n\nexport const shareAppLink = (link=\"\") => {\n    VKConnect.send(\"VKWebAppShare\", {\n        link: \"https://vk.com/app\" + String(APP_ID) + \"#\" + link\n    })\n}\n\nexport const setStatusBarColor = (color=\"dark\", background=\"#fff\") => {\n    VKConnect.send(\"VKWebAppSetViewSettings\", {\n        \"status_bar_style\": color, \n        \"action_bar_color\": background\n    });\n}","import {store} from \"../../index\";\n\nexport const smoothScrollToTop = () => {\n    const c = document.documentElement.scrollTop || document.body.scrollTop;\n\n    if (c > 30) {\n        return;\n    }\n\n    if (c > 0) {\n        window.requestAnimationFrame(smoothScrollToTop);\n        window.scrollTo(0, c - c / 8);\n    }\n};\n\nexport const restoreScrollPosition = () => {\n    let scrolls = store.getState().vkui.componentScroll;\n\n    Object.keys(scrolls).forEach((component) => {\n        let componentData = scrolls[component];\n\n        let element = document.getElementById(component);\n\n        if (element) {\n            element = element.getElementsByClassName(\"HorizontalScroll__in\")[0];\n\n            element.scrollLeft = componentData.x;\n            element.scrollTop = componentData.y;\n        }\n    });\n};\n\n/** Функция для склонения существительных по числительному (5 листокв, 1 листок, 3 листка): decOfFum(num, [\"листок\", \"листка\", \"листков\"]) */\nexport const decOfNum = (number, titles) => {\n  let decCases = [2, 0, 1, 1, 1, 2];\n  return titles[number % 100 > 4 && number % 100 < 20 ? 2 : decCases[Math.min(number % 10, 5)]];\n}","export const SET_FORM_DATA = 'SAVE_FORM_DATA';","const routes = {\n\t'^hash\\_link': {\n\t\tstory: \"main\",\n\t\tview: \"main\",\n\t\tpanel: \"hash_link\"\n\t}\n}\n\nlet routesRegExps = {}\n\nfor (let route in routes) {\n     routesRegExps[route] = {\n        ...(routes[route]),\n        regExp: new RegExp(route, routes[route].flags)\n    }\n}\n\n\nexport {routes, routesRegExps}","import {\n    SET_PAGE, \n    SET_STORY, \n    GO_BACK, \n    OPEN_POPOUT, \n    CLOSE_POPOUT, \n    OPEN_MODAL, \n    CLOSE_MODAL,\n    CLOSE_HEADER_CONTEXT,\n    OPEN_HEADER_CONTEXT\n} from './actionTypes';\n\nimport {routesRegExps, routes} from \"../../services/routes\";\n\nexport const setStory = (story, initial_panel, hash=\"\", params={}, settingView=\"\") => (\n    {\n        type: SET_STORY,\n        payload: {\n            story: story,\n            initial_panel: initial_panel,\n            hashParams: params,\n            hash,\n            settingView\n        }\n    }\n);\n\nexport const setPage = (view, panel, hash=\"\", params={}) => (\n    {\n        type: SET_PAGE,\n        payload: {\n            view: view,\n            panel: panel,\n            hashParams: params,\n            hash\n        }\n    }\n);\n\nexport const goBack = (from = 'iOS') => (\n    {\n        type: GO_BACK,\n        payload: {\n            from: from\n        }\n    }\n);\n\nexport const openPopout = (popout) => (\n    {\n        type: OPEN_POPOUT,\n        payload: {\n            popout: popout\n        }\n    }\n);\n\nexport const closePopout = () => (\n    {\n        type: CLOSE_POPOUT\n    }\n);\n\nexport const openModal = (id, props={}) => (\n    {\n        type: OPEN_MODAL,\n        payload: {\n            id,\n            modalProps:  props\n        }\n    }\n);\n\nexport const closeModal = () => (\n    {\n        type: CLOSE_MODAL\n    }\n);\n\nexport const openHeaderContext = (id=\"\") => (\n    {\n        type: OPEN_HEADER_CONTEXT,\n        payload: {\n            id: id\n        }\n    }\n)\n\nexport const closeHeaderContext = (id=\"\") => (\n    {\n        type: CLOSE_HEADER_CONTEXT,\n        payload: {\n            id: id\n        }\n    }\n)\n\nexport const setRouteHash = (hash=\"\", params={}) => {\n    return (dispatch) => {\n        let matched = false;\n        for (let route in routesRegExps) {\n            if (hash.match(routesRegExps[route].regExp)) {\n                matched = routesRegExps[route];\n            }\n        }\n\n        if (matched) {\n            if (matched.params) {\n                let matchedParams = matched.params(hash.match(matched.regExp));\n                params = {\n                    ...params,\n                    ...matchedParams\n                }\n                console.log(params);\n            }\n\n            dispatch(setStory(matched.story, matched.panel, hash, params, matched.view))\n            dispatch(setPage(matched.view, matched.panel, hash, params))\n        } \n    }\n}","export default {\n\tapi: 'https://localhost/restApi',\n}","\nimport config from './config';\n\nimport { fetch } from 'whatwg-fetch';\nimport $ from 'jquery';\n\nexport default class RestClient {\n\n  constructor () {\n    this.handler = () => {}\n  }\n\n  withErrorHandler (a) {\n    this.handler = a;\n    this._token = '';\n    return this;\n  }\n\n  serialize (obj, prefix) {\n    let str = [], p;\n    for (p in obj) {\n      if (obj.hasOwnProperty(p)) {\n        let k = prefix ? prefix + \"[\" + p + \"]\" : p,\n          v = obj[p];\n        str.push((v !== null && typeof v === \"object\") ?\n          this.serialize(v, k) :\n          encodeURIComponent(k) + \"=\" + encodeURIComponent(v));\n      }\n    }\n    return str.join(\"&\");\n  }\n\n  async prepareData (method, query={}, uniq=false, type='get', isFile=false) {\n    if (this.token) \n        query.token = this.token\n    \n    if (uniq) query.u = new Date().getTime();\n    \n    let headers = {}\n    let props = {}\n\n    if (type === \"post\") {\n      headers = {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n\n      props.body = (isFile) ? query : JSON.stringify(query);\n      query = {}\n    }\n    query = this.serialize(query);\n    query = query ? `?${query}` : '';\n\n    return [`${config.api}${method}${query}`, {\n      method: type === 'get' ? \"GET\" : \"POST\",\n      mode: 'cors',\n      headers: {\n        'Vk-Params': window.location.search.substring(1),\n        ...headers\n      },\n      ...props\n    }]\n  } \n\n  /** Makes other fetch custom query */\n  async makeQuery (url, data) {\n    return new Promise((resolve, reject) => {\n      let response = '';\n      fetch(url, data).then(async (res) => {\n\n        response = await res.text();\n\n        res = JSON.parse(response);\n        \n        if (res.error) {\n          this.handler(res)\n          return reject(res)\n        }\n        \n        return resolve(res.response);\n      }).catch((r) => {\n\n        let err = new String('Произошла ошибка');\n        \n        err.response = response;\n        err.isServerError = true;\n\n        if (this.handler) {\n          this.handler(err)\n          return reject(err)\n        }\n\n        return reject(err);\n      });\n    })\n  }\n\n  async makeQueryAjax (data) {\n    return new Promise((resolve, reject) => {\n      let response = '';\n      \n      data.success = (response) => {\n        let res = response;\n        \n        if (res.error) {\n          this.handler(res)\n          return reject(res)\n        }\n\n        return resolve(res.response);\n      }\n\n      data.error = (xhr, response, a) => {\n        let err = new String('Произошла ошибка');\n        err.response = response;\n        err.isServerError = true;\n        \n        if (this.handler) {\n          this.handler(err)\n          return reject(err)\n        }\n\n        return reject(err);\n      }\n\n      data.xhr = function () {\n        let xhr = $.ajaxSettings.xhr()\n        data.xhrLoads(xhr);\n        return xhr;\n      }\n\n      $.ajax(data);\n    })\n  }\n    \n  /** Makes GET query to REST API */\n  async get (method, query = {}, uniq=false)  {\n    return new Promise(async (resolve, reject) => {\n      let [url, data] = await this.prepareData(method, query, uniq);\n      return this.makeQuery(url, data).then(resolve, reject);\n    });\n  }\n\n  /** Makes POST query to REST API */\n  async post (method, query = {}, uniq=false)  {\n    return new Promise(async (resolve, reject) => {\n      let [url, data] = await this.prepareData(method, query, uniq, \"post\");\n      return this.makeQuery(url, data).then(resolve, reject);\n    });\n  }\n\n  /** Makes uploading file to server */\n  async uploadFile (method, file, uniq=false, field='file', paramsAjax={}) {\n    let form = new FormData();\n    \n    form.append(field, file);\n\n    return new Promise(async (resolve, reject) => {\n      let [url, data] = await this.prepareData(method, form, uniq, \"post\", true);\n      \n      data.url = url;\n      data = {...paramsAjax, ...data};\n      data.headers['Content-Type'] = undefined;\n      data.headers['Accept'] = undefined;\n\n      data = {\n        ...paramsAjax,\n        contentType: false,\n        processData: false,\n        type: data.method,\n        url: data.url,\n        headers: data.headers,\n        data: form,\n        cache: false\n      }\n\n      return this.makeQueryAjax(data).then(resolve, reject);\n\n    });\n  }\n\n  setAuthToken (token='') {\n    this._token = token;\n  }\n}\n","import React from 'react';\n\nimport './OutlineMessage.css';\n\nexport default class OutlineMessage extends React.PureComponent {\n\trender () {\n\t\treturn (\n\t\t\t<div className=\"outline-message\">\n\t\t\t\t{this.props.text}\n\t\t\t</div>\n\t\t);\n\t}\n}","import React from 'react';\nimport {connect} from 'react-redux';\n\nimport {goBack} from '../../../store/router/actions';\n\nimport {HeaderButton} from '@vkontakte/vkui';\n\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\n\nclass BackButton extends React.PureComponent {\n\trender () {\n\t\treturn (<HeaderButton onClick={() => {\n\t\t\tif (this.props.onClick) \n\t\t\t\tthis.props.onClick();\n\t\t\tthis.props.goBack();\n\t\t}}>{this.props.icon === \"close\" ? <Icon24Cancel/> : <Icon24Back/>}</HeaderButton>);\n\t}\n}\n\nconst mapDispatchToProps = {\n    goBack\n};\n\nexport default connect(null, mapDispatchToProps)(BackButton);","import React from 'react';\nimport {connect} from 'react-redux';\n\nimport {goBack, setPage} from '../../store/router/actions';\nimport OutlineMessage from '../../components/atoms/OutlineMessage';\nimport BackButton from '../../components/atoms/BackButton';\n\nimport {\n    Panel,\n    PanelHeader,\n    Div\n} from '@vkontakte/vkui';\n\nclass HomePanelBase extends React.Component {\n    render() {\n        const {id} = this.props;\n        return (\n            <Panel id={id}>\n                <PanelHeader left={this.props.showBackButton ? <BackButton/> : null}>Пример</PanelHeader>\n                <Div>\n                    <OutlineMessage text={this.props.text}/>\n                </Div>\n            </Panel>\n        );\n    }\n\n}\n\n// Connection state from redux to component\nconst mapStateToProps = (state) => {\n    return {\n\n    }\n}\n\n// Dispatches to property functions\nconst mapDispatchToProps = {\n    setPage,\n    goBack,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HomePanelBase);","import React from 'react';\nimport {connect} from 'react-redux';\n\nimport {openModal} from \"../../store/router/actions\";\n\nimport {List, Cell, Avatar, ModalPage, ModalPageHeader, HeaderButton, IS_PLATFORM_IOS} from \"@vkontakte/vkui\";\n\nimport Icon24Dismiss from '@vkontakte/icons/dist/24/dismiss';\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\nimport Icon24Chevron from '@vkontakte/icons/dist/24/chevron';\n\nconst bots = [\n    {\n        name: 'VKS',\n        avatar: 'https://pp.userapi.com/c851520/v851520442/48ce/Sik7V4c58qw.jpg',\n        desc: 'Нет, меня не роняли в детстве'\n    },\n    {\n        name: 'Недобот',\n        avatar: 'https://pp.userapi.com/c854420/v854420431/da51/X8ohw4-4Fk4.jpg',\n        desc: 'Я ни разу не пил кокосовое молоко'\n    },\n    {\n        name: 'Callback API Бот',\n        avatar: 'https://pp.userapi.com/c846523/v846523036/1e69b7/UxWZ1yAqY7I.jpg',\n        desc: 'Даже не спрашивай'\n    },\n];\n\nclass HomeBotsListModal extends React.Component {\n\n    render() {\n        const {id, onClose, openModal} = this.props;\n\n        return (\n            <ModalPage\n                id={id}\n                header={\n                    <ModalPageHeader\n                        left={!IS_PLATFORM_IOS &&\n                        <HeaderButton onClick={onClose}><Icon24Cancel/></HeaderButton>}\n                        right={IS_PLATFORM_IOS &&\n                        <HeaderButton onClick={onClose}><Icon24Dismiss/></HeaderButton>}\n                    >\n                        /appbots на минималках\n                    </ModalPageHeader>\n                }\n                onClose={onClose}\n                settlingHeight={80}\n            >\n                <List>\n                    {bots.map((bot, index) => (\n                        <Cell\n                            key={index}\n                            description={bot.desc}\n                            before={<Avatar size={40} src={bot.avatar}/>}\n                            onClick={() => openModal('MODAL_PAGE_BOT_INFO')}\n                            asideContent={<Icon24Chevron fill=\"#528bcc\"/>}\n                        >\n                            {bot.name}\n                        </Cell>\n                    ))}\n                </List>\n            </ModalPage>\n        );\n    }\n\n}\n\nconst mapDispatchToProps = {\n    openModal\n};\n\nexport default connect(null, mapDispatchToProps)(HomeBotsListModal);","import React from 'react';\nimport {connect} from 'react-redux';\n\nimport {Cell, List, Avatar, InfoRow, ModalPage, ModalPageHeader, HeaderButton, IS_PLATFORM_IOS} from \"@vkontakte/vkui\";\n\nimport Icon24Dismiss from '@vkontakte/icons/dist/24/dismiss';\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\n\nclass HomeBotsListModal extends React.Component {\n\n    render() {\n        const {id, onClose} = this.props;\n\n        return (\n            <ModalPage\n                id={id}\n                header={\n                    <ModalPageHeader\n                        left={!IS_PLATFORM_IOS &&\n                        <HeaderButton onClick={onClose}><Icon24Cancel/></HeaderButton>}\n                        right={IS_PLATFORM_IOS &&\n                        <HeaderButton onClick={onClose}><Icon24Dismiss/></HeaderButton>}\n                    >\n                        Информация о боте\n                    </ModalPageHeader>\n                }\n                onClose={onClose}\n                settlingHeight={80}\n            >\n                <Cell\n                    description=\"Описание\"\n                    before={<Avatar size={40} src=\"https://vk.com/images/community_100.png?ava=1\"/>}\n                >\n                    Название\n                </Cell>\n                <List>\n                    <Cell>\n                        <InfoRow title=\"Подписчиков\">\n                            8800\n                        </InfoRow>\n                    </Cell>\n                    <Cell>\n                        <InfoRow title=\"Записей\">\n                            555\n                        </InfoRow>\n                    </Cell>\n                    <Cell>\n                        <InfoRow title=\"Рейтинг\">\n                            3535\n                        </InfoRow>\n                    </Cell>\n                </List>\n            </ModalPage>\n        );\n    }\n\n}\n\nexport default connect()(HomeBotsListModal);","import React from 'react';\nimport redux from 'redux';\n\nimport {setRouteHash} from '../../../store/router/actions';\n\nimport {connect} from 'react-redux';\n\n/**\n  Компонент для отрисовки ссылок-акшинов, которые создают переход по хешу приложения\n  без смены URL адреса. Работает намного быстрее чем обычная смена URL через объект истории или Location,\n  так как не ждет реакции браузера на изменение состояния\n\n  Используется:\n  <RouteLink hash=\"hash_link\" params={{param1: true, param2: false}}>\n  \tКликни на меня\n  </RouteLink>\n\n  params - параметры перехода, нового состояния\n  hash - хеш-адрес из routes.js\n*/\nclass RouteLink extends React.PureComponent {\n\n\tgotToPage = (e) => {\n\t\tlet findedLink = false;\n\t\tlet target = e.target;\n\t\t\n\t\twhile (true) {\n\t\t\tif (!target.parentNode) break;\n\t\t\tif (target.parentNode === e.currentTarget) break;\n\t\t\tif (target.parentNode.href && target.parentNode.href.match(/^https/)) {\n\t\t\t\tfindedLink = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\ttarget = target.parentNode;\n\t\t}\n\n\t\tif (findedLink || (e.target.href && e.target.href.match(/^https/))) return true;\n\t\te.preventDefault();\n\t\tthis.props.setRouteHash(this.props.hash, this.props.params || {});\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\tReact.cloneElement(this.props.children, {\n\t\t\t\tonClick: this.gotToPage\n\t\t\t})\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state) => {\n    return {\n    }\n}\n\nconst mapDispatchToProps = {\n    setRouteHash\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RouteLink);","import React from 'react';\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux'\nimport {goBack, closeModal, setStory} from \"./js/store/router/actions\";\n\n\nimport * as VK from './js/services/VK';\nimport RestClient from './js/services/restApi';\nimport {routes, routesRegExps} from './js/services/routes';\n\n\nimport {Epic, View, Root, Tabbar, ModalRoot, TabbarItem, ConfigProvider, Alert, Textarea} from \"@vkontakte/vkui\";\n\nimport Icon28Newsfeed from '@vkontakte/icons/dist/28/newsfeed';\nimport Icon28More from '@vkontakte/icons/dist/28/more';\n\nimport MainPanelBase from './js/panels/clear/connectedPanel';\n\nimport HomeBotsListModal from './js/components/modals/HomeBotsListModal';\nimport HomeBotInfoModal from './js/components/modals/HomeBotInfoModal';\n\nimport RouteLink from './js/components/atoms/RouteLink';\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        \n        this.lastAndroidBackAction = 0;\n        this.routes = routesRegExps;\n        \n        this.rest = new RestClient();\n        this.rest.withErrorHandler(this.restApiErrorHandler);\n\n        window.alert = (...args) => this.alert(...args);\n        window.confirm = (...args) => this.confirm(...args);\n        window.prompt = (...args) => this.prompt(...args);\n\n    }\n\n    restApiErrorHandler = (error) => {\n        if (error.isServerError) {\n            alert(error.message ? error.message : \"Неизвестная ошибка\", \"Ошибка\");\n        } else {\n            alert(error.error ? error.error : \"Неизвестная ошибка\", \"Ошибка\");\n        }\n    }\n\n    confirm () {\n\n    }\n\n    alert (message, title=\"\") {\n        this.props.openPopout(\n            <Alert\n                actions={[{\n                  title: 'ОК',\n                  autoclose: true,\n                }]}\n                onClose={this.props.closePopout}\n            >\n                <h2>{title.toString()}</h2>\n                <p>\n                    {\n                        (typeof message === \"object\" || Array.isArray(message)) ? \n                            JSON.stringify(message) : message.toString()\n                    }\n                </p>\n            </Alert>\n        );\n    }\n\n    prompt (message, callback=Function(), defaultValue=\"\", titleAccept=\"ОК\") {\n        let value = \"\";\n\n        const promptAreaStyles = {\n            marginTop: 9\n        }\n\n        this.props.openPopout(\n            <Alert\n                actions={\n                    [\n                        {\n                            title: 'Отмена',\n                            autoclose: true,\n                            style: 'cancel',\n                            action : () => {\n                                return callback(null)\n                            }\n                        }, \n                        {\n                            title: titleAccept,\n                            autoclose: true,\n                            action : () => {\n                                return callback(value);\n                            }\n                        }\n                    ]\n                }\n                onClose={this.props.closePopout}\n            >\n                <p>\n                    {message}\n                </p>\n                <div style={promptAreaStyles}>\n                    <Textarea defaultValue={defaultValue} onChange={(e) => {\n                        value = e.target.value\n                    }}/>\n                </div>\n            </Alert>\n        );\n    }\n\n    confirm (message, callback=Function(), titleAccept='ОК') {\n        this.props.openPopout(\n            <Alert\n                actions={\n                    [\n                        {\n                            title: 'Отмена',\n                            autoclose: true,\n                            style: 'cancel',\n                            action : () => {\n                                return callback(false)\n                            }\n                        }, \n                        {\n                            title: titleAccept,\n                            autoclose: true,\n                            action : () => {\n                                return callback(true)\n                            }\n                        }\n                    ]\n                }\n                onClose={this.props.closePopout}\n            >\n                <p>\n                    {message}\n                </p>\n            </Alert>\n        );\n    }\n\n\n    componentDidMount() {\n        const {goBack, dispatch} = this.props;\n\n        dispatch(VK.initApp());\n\n        window.onpopstate = (e) => {\n            let timeNow = +new Date();\n\n            if (e.type === \"popstate\") {\n                if (timeNow - this.lastAndroidBackAction > 500) {\n                    this.lastAndroidBackAction = timeNow;\n\n                    if (this.props.headerContexts.length) {\n                        this.props.closeHeaderContext(this.props.headerContexts[this.props.headerContexts.length - 1])\n                    } else {\n                        goBack('Android');\n                    }\n\n                } else {\n                    window.history.pushState(null, null);\n                }\n            }\n        };\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const {activeView, activeStory, activePanel, scrollPosition} = this.props;\n\n        if (\n            prevProps.activeView !== activeView ||\n            prevProps.activePanel !== activePanel ||\n            prevProps.activeStory !== activeStory\n        ) {\n            let pageScrollPosition = scrollPosition[activeStory + \"_\" + activeView + \"_\" + activePanel] || 0;\n\n            window.scroll(0, pageScrollPosition);\n        }\n    }\n\n    render() {\n        const {goBack, setStory, closeModal, popouts, activeView, activeStory, activePanel, activeModals, panelsHistory, colorScheme} = this.props;\n\n        let history = (panelsHistory[activeView] === undefined) ? [activeView] : panelsHistory[activeView];\n        let popout = (popouts[activeView] === undefined) ? null : popouts[activeView];\n        let activeModal = (activeModals[activeView] === undefined) ? null : activeModals[activeView];\n\n        const homeModals = (\n            <ModalRoot activeModal={activeModal}>\n                <HomeBotsListModal\n                    id=\"MODAL_PAGE_BOTS_LIST\"\n                    onClose={() => closeModal()}\n                />\n                <HomeBotInfoModal\n                    id=\"MODAL_PAGE_BOT_INFO\"\n                    onClose={() => closeModal()}\n                />\n            </ModalRoot>\n        );\n\n        return (\n            <ConfigProvider isWebView={true} scheme={colorScheme}>\n                <Epic activeStory={activeStory} tabbar={\n                    <Tabbar>\n                        <TabbarItem\n                            onClick={() => setStory('main', 'main')}\n                            selected={activeStory === 'main'}\n                        ><Icon28Newsfeed/></TabbarItem>\n                        <TabbarItem\n                            onClick={() => setStory('more', 'callmodal')}\n                            selected={activeStory === 'more'}\n                        ><Icon28More/></TabbarItem>\n                    </Tabbar>\n                }>\n                    <Root id=\"main\" activeView={activeView} popout={popout}>\n                        <View\n                            id=\"main\"\n                            modal={homeModals}\n                            activePanel={activePanel}\n                            history={history}\n                            onSwipeBack={() => goBack()}\n                        >\n\t\t\t\t\t\t   <MainPanelBase id=\"main\" text={<RouteLink hash=\"hash_link\"><span></span></RouteLink>}/>\n                           <MainPanelBase id=\"hash_link\" text=\"Вот тут уже /#hash_link\" showBackButton={true}/>\n                        </View>\n                    </Root>\n                </Epic>\n            </ConfigProvider>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        activeView: state.router.activeView,\n        activePanel: state.router.activePanel,\n        activeStory: state.router.activeStory,\n        panelsHistory: state.router.panelsHistory,\n        activeModals: state.router.activeModals,\n        popouts: state.router.popouts,\n        scrollPosition: state.router.scrollPosition,\n        headerContexts: state.router.headerContexts,\n        colorScheme: state.vkui.colorScheme\n    };\n};\n\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        dispatch,\n        ...bindActionCreators({setStory, goBack, closeModal}, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","import {\n    SET_COLOR_SCHEME,\n    SET_ACCESS_TOKEN,\n    SET_ACTIVE_TAB,\n    SET_SCROLL_POSITION,\n    SET_SCROLL_POSITION_BY_ID\n} from './actionTypes';\n\nexport const setColorScheme = (scheme) => (\n    {\n        type: SET_COLOR_SCHEME,\n        payload: scheme\n    }\n);\n\nexport const setAccessToken = (accessToken) => (\n    {\n        type: SET_ACCESS_TOKEN,\n        payload: accessToken\n    }\n);\n\nexport const setActiveTab = (component, tab) => (\n    {\n        type: SET_ACTIVE_TAB,\n        payload: {\n            component,\n            tab\n        }\n    }\n);\n\nexport const setScrollPosition = (component, x = 0, y = 0) => (\n    {\n        type: SET_SCROLL_POSITION,\n        payload: {\n            component,\n            x,\n            y\n        }\n    }\n);\n\nexport const setScrollPositionByID = (component) => (\n    {\n        type: SET_SCROLL_POSITION_BY_ID,\n        payload: {\n            component\n        }\n    }\n);","// Polyfills\nimport 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport 'url-search-params-polyfill';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport mVKMiniAppsScrollHelper from '@vkontakte/mvk-mini-apps-scroll-helper';\n\nimport {applyMiddleware, createStore} from \"redux\";\nimport thunk from 'redux-thunk';\nimport {Provider} from 'react-redux';\nimport rootReducer from './js/store/reducers';\n\nimport {composeWithDevTools} from 'redux-devtools-extension';\nimport {setStory} from \"./js/store/router/actions\";\n\n\n// Styles importings\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './css/main.css';\n\nimport {GROUP_LINK, ERROR_NOTIFICATION_MESSAGE} from './js/services/constants';\n\nimport App from './App';\n\n\nexport const store = createStore(rootReducer, composeWithDevTools(\n    applyMiddleware(thunk),\n));\n\nstore.dispatch(setStory('main', 'main'));\n\n/** Error handling function for best user excperience */\nwindow.onerror = function (errorMsg, url, lineNumber, columnNumber, error) {\n    let textAoutput = ERROR_NOTIFICATION_MESSAGE.replace(/\\{GROUP_LINK\\}/g, GROUP_LINK) + ' <br/><pre>'+ errorMsg \n    + '\\n' +  url + ':' + lineNumber + ':' + columnNumber + '\\n' + (error || {}).stack + '</pre><br/>' + window.navigator.userAgent;\n\n    document.body.innerHTML = textAoutput;\n    console.error(error);\n    console.info(textAoutput);\n    return false;\n}\n\nconst root = document.getElementById('root');\n\nmVKMiniAppsScrollHelper(root);\n\nReactDOM.render(\n    <Provider store={store}>\n        <App/>\n    </Provider>,\n    root\n);","export const GROUP_LINK = 'vk.com/challengerapp';\nexport const ERROR_NOTIFICATION_MESSAGE = \"Произошла ошибка, пожалуйста, пришлите скриншот нам {GROUP_LINK}\";"],"sourceRoot":""}